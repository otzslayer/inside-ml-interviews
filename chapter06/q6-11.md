# Q6.11 지연 시간 단축

**🙋 질문 : 서빙 지연 시간을 개선하는 방법에는 무엇이 있나요?**

## 1. 피처 수화

- 피처 수화를 개선해 예측 속도 향상 및 전체 시스템 성능 최적화
  - 빠른 읽기 작업에 최적화된(지연 시간이 짧은) 데이터 스토어 사용
  - 피처를 컴팩트한 형식으로 인코딩
  - 네트워크 호출 순서 조정하는 등 수화 로직 자체에 대한 개선 아이디어 적용

## 2. 캐싱

- 캐싱을 통해 동일한 입력에 대해 서버가 반복 작업하는 것을 방지하여 지연 시간을 단축
  - 다양한 유형의 데이터를 캐시하는데 사용 : 피처, 예측값, 모델의 중간 레이어 출력 등
  - 유의할 점
    - 시스템 복잡성과 유지 관리 노력도 늘어난다는 점에 유의
    - 데이터 Stale 문제 발생에 유의

## 3. 모델 최적화

- 모델 최적화를 통한 모델 서버 성능 향상
  - 모델의 크기, 복잡성을 줄이고 불필요한 피처 제거
  - 계산 최적화를 통해 모델 속도 향상

## 4. 예측 사전 계산

- 예측을 사전 계산하여 스토어에 저장
  - 오프라인 스코어링 작업에서 사전에 예측값을 계산해서 데이터 스토어에 저장
  - 온라인 예측 시, 모델 호출 없이 고유 키를 사용해 데이터 스토어에서 계산된 예측값 조회
- 또는 일괄 계산 대신에 상위 엔터티에 대해서만 미리 저장
  - 사용량 등을 기준으로 상위 엔터티 선정
  - 나머지 엔터티는 모델 서버를 사용한 온라인 예측 수행
- 또는 높은 카디널리티 엔터티의 고유 값을 줄이는 방법
  - 계산해야하는 고유 엔터티 수를 줄여 사전 계산 시간과 저장 공간을 줄임
  - 다만 예측 정확도가 감소할 수 있음

## 5. 리소스 확장

- 모델 서버가 클라이언트에 가깝게 위치시킴
  - 네트워크 지연 시간을 줄여 전반적인 서비스 지연 시간 개선
- 모델 서버를 확장 가능하도록 함
  - 더 많은 인스턴스를 추가해 모델 서버를 수평으로 확장
  - 더 많은 하드웨어 리소스를 추가해 수직으로 확장

## 6. 모델 서버 검사

- 모델 서버의 병목 현상을 찾아내 수정
  - 병목 현상의 원인 : 비효율적인 가비지 콜렉션, 느린 I/O, 네트워크 전체 등 다양함
