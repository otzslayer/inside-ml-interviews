# Q6.12 많은 요청 처리하기

**🙋 질문 : 서버가 많은 요청을 처리하도록 하려면 어떻게 하나요?**

**🗣️ 일반적으로 웹 서비스는 대량의 요청을 처리하도록 확장할 수 있으며 다음 몇 가지 기법이 있습니다.**

## 1. 로드 밸런싱<sup>Load balancing</sup>

- 트래픽을 여러 서버에 분산해 단일 서버가 과부화되지 않도록 함
  - 라운드 로빈<sup>round robin</sup> : 서버 목록을 순환하면서 들어오는 요청을 균등하게 분배하는 방법
  - 이 외에 최소 연결<sup>least connections</sup> 기반, IP 해싱, 가중 라운드 로빈 등의 기술이 있음

## 2. 오토 스케일링<sup>Auto-scaling</sup>

- 현재 트래픽 수준에 따라 서버 수를 자동으로 늘리고 줄이도록 함

## 3. 서버 구성 조정<sup>Server configuration</sup>

- CPU 및 RAM 기준으로 크고 작은 인스턴스로 실험해, 메모리 할당을 평가하고 다양한 가비지 콜렉션 기술을 시도

## 4. 애플리케이션 코드 최적화

- 코드 최적화를 통해 응답 시간 최소화하고 리소스 사용량을 줄임
- 타임아웃 및 폴백<sup>fallback</sup> 전략을 사용한 대처방안 수립
- 트래픽을 기반으로 컴퓨팅을 동적으로 조정하는 Dynamic Neural Network의 검토

## 5. 종속성 최적화

- 웹 서비스 병목 현상의 원인이 되는 종속성 검토
  - 적절한 인덱싱, 파티셔닝, 캐싱 기술 등 데이터베이스 종속성을 최적화
  - 각 요청애 새 연결을 생성하는 대신 이미 만들어진 데이터베이스 연결을 재사용하는 것이 좋음

## 6. 마이크로서비스

- 모놀로식 웹 서비스를 더 작고 관리하기 쉬운 구성 요소로 나누는 것
  - 작고 독립적인 배포 가능한 서비스를 구현
  - 트래픽 수준에 따라 개별 구성 요소를 더 쉽게 확장 가능

---

이 외에도 ML 모델 서빙 시에 캐싱을 활용하는 방법이 있음

- 피처, 임베딩, 모델 예측 결과 등을 캐싱
- 인스턴스 수준 캐싱, 데이터 센터 수준 캐싱(예: memcache)
- 지연 시간과 캐시 적중률<sup>hit rate</sup>간의 균형이 필요
