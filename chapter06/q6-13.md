# Q6.13 서빙 시 모델 업데이트

**🙋 질문 : 모델 서버에서 모델을 업데이트하는 과정을 설명하세요.**

## 1. 모델 학습과 서빙에 사용하는 하드웨어 분리하는 경우

- 하드웨어 분리의 장점
  - 최적화
    - 각 작업에 독린된 리소스를 할당하여 학습 또는 서빙의 **요구사항에 맞게 하드웨어 최적화 가능**
  - 확장성
    - 학습과 서비스를 별도 관리하여 **변화하는 수요에 맞춰 구성요소를 독립적으로 확장 가능**
- 모델 업데이트 방법
  - **핫스왑을 통한 다운타임 줄이기**
    - 학습된 모델을 모델 서버에 배포할 때 서버 재시작 또는 모델 구성(config)을 통해 모델 스냅샷을 운영 환경에 넣고 빼는 방법
    - 대량의 모델을 호스팅하는 경우 모델을 보다 유연하고 적응력 있게 배포할 수 있음
  - **연속 학습으로 새로운 데이터 스트림이 들어옴에 따라 모델을 점진적으로 업데이트**
    - 학습 서버에서는 학습 데이터 스트림을 구독<sup>subscribe</sup>하여 경사 계산, 모델 매개변수 업데이트를 하고
    - 모델 서버에서는 학습 서버로부터 실시간으로 게시<sup>publish</sup>되는 업데이트를 모델을 새로 배포

## 2. 동일한 인스턴스에서 모델을 학습시키고 제공하는 경우

- 업데이트 프로세스 단순화 가능하지만 몇 가지 단점 존재
  - **컴퓨팅 리소스의 비효율적인 할당**
  - **장애 복원력 부족**
  - **중복 작업**
- 단일 인스턴스에서 모델 업데이트하는 일반적인 단계
  - 모델 학습
    - 업데이트된 데이터 & 모델 아키텍처를 사용해 새 버전의 모델 학습
  - 모델 평가
    - 업데이트된 모델을 테스트하여 정상 작동하는지, 성능이 충분한지 확인
  - 모델 패키징
    - 모델 서버에 쉽게 로드할 수 있는 형식으로 모델 패키징
  - 모델 업로드
    - 모델 저장소에 푸시하여 학습된 모델 및 히스토리 등 메타데이터 저장
  - 모델 활성화
    - 모델 서버가 업데이트된 모델을 사용 가능하도록 설정
      - 구성 파일 업데이트 등
    - 최신 모델 버전이 자동으로 폴링되도록 모델 서버를 구성하기도 함
  - 모델 모니터링
    - 업데이트된 모델의 성능을 모니터링하여 예상대로 작동하는지 확인

> [!Tip]
> 다운타임을 최소화하고 모델 서버가 항상 최신 버전의 모델을 실행하도록 하려면 모델 서버에서 모델을 업데이트하는 프로세스를 **_문서화_(_📁_)** 하는 것이 중요. 또한 **_롤백 계획_(_↩︎_)** 을 마련하여 업데이트된 모델에 문제가 발생할 때 이전 버전으로 신속히 되돌릴 수 있도록 조치하는 것도 필요함
